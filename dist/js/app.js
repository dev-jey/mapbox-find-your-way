mapBoxLink=e=>`https://api.mapbox.com/geocoding/v5/mapbox.places/${e}.json?access_token=pk.eyJ1Ijoiam9obmF0aGFubml6aW9sIiwiYSI6ImNqcG5oZjR0cDAzMnEzeHBrZGUyYmF2aGcifQ.7vAuGZ0z6CY0kXYDkcaOBg&limit=10&bbox=-97.325875,49.766204,-96.953987,49.99275`,getOrigin=()=>{let e=document.getElementById("origin").value;getMapBoxLocations(e,"origin")},getDestination=()=>{let e=document.getElementById("destination").value;getMapBoxLocations(e,"destination")},getMapBoxLocations=(e,t)=>{fetch(mapBoxLink(e)).then(e=>e.json()).then(e=>{locations=e.features,all_locations=[],locations.forEach(e=>{location_data=`<li data-long="${e.center[0]}" data-lat="${e.center[1]}" \n          id="${e.id.split(".")[1]}" class="${t}" onclick="setSelected(${e.id.split(".")[1]})">\n          <div class="name ${t}">${e&&e.place_name.split(",")[0]}</div>\n          <div class="${t}">${e&&e.place_name.split(",")[1]}</div>\n        </li>`,all_locations.push(location_data)}),"origin"==t?document.getElementById("origins").innerHTML=all_locations.join(""):document.getElementById("destinations").innerHTML=all_locations.join("")}).catch(e=>{})},setSelected=e=>{_typ=event.target.className;for(var t=document.getElementById("origins"),s=0;s<t.childNodes.length;s++)"origin selected"==t.childNodes[s].className&&_typ.includes("origin")&&(selected=t.childNodes[s],selected.classList.remove("selected")),"origin"==t.childNodes[s].className&&t.childNodes[s].id==e&&_typ.includes("origin")&&t.childNodes[s].classList.add("selected");for(var i=document.getElementById("destinations"),n=0;n<i.childNodes.length;n++)"destination selected"==i.childNodes[n].className&&_typ.includes("destination")&&(new_selected=i.childNodes[n],new_selected.classList.remove("selected")),"destination"==i.childNodes[n].className&&i.childNodes[n].id==e&&_typ.includes("destination")&&i.childNodes[n].classList.add("selected")},planTrip=()=>{selected_origin=document.getElementsByClassName("origin selected"),selected_destination=document.getElementsByClassName("destination selected"),selected_origin&&selected_destination&&selected_origin!=selected_destination&&fetch(`https://api.winnipegtransit.com/v3/trip-planner.json?origin=geo/${selected_origin[0].dataset.lat},${selected_origin[0].dataset.long}&api-key=ZPFv2Zx6ny1KrlPKnfe&destination=geo/${selected_destination[0].dataset.lat},${selected_destination[0].dataset.long}`).then(e=>e.json()).then(e=>{all_segs=[],e.plans[0].segments.forEach(e=>{"walk"==e.type&&(e.to.stop?all_segs.push(`<li>\n                              <i class="fas fa-walking" aria-hidden="true"></i>${e.type} for ${e.times.durations.total} minutes to stop #${e.to.stop&&e.to.stop.key} - ${e.to.stop&&e.to.stop.name}\n                            </li>`):all_segs.push(`<li>\n                              <i class="fas fa-walking" aria-hidden="true"></i>${e.type} for ${e.times.durations.total} minutes to your destination\n                            </li>`)),"ride"==e.type&&all_segs.push(`\n            <li>\n              <i class="fas fa-bus" aria-hidden="true"></i>${e.type} the ${e.route.name||e.route.key} for ${e.times.durations.total} minutes\n            </li>`),"transfer"==e.type&&all_segs.push(`<li>\n            <i class="fas fa-ticket-alt" aria-hidden="true"></i>${e.type} from stop\n             #${e.from.stop&&e.from.stop.key} - ${e.from.stop&&e.from.stop.key} to stop #${e.to.stop&&e.to.stop.key} - ${e.to.stop&&e.to.stop.name}\n          </li>`)}),document.getElementById("my-trip").innerHTML=all_segs.join("")})};