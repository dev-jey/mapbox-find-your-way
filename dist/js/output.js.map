{"version":3,"sources":["app.js","gulpfile.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"output.js","sourcesContent":["mapBoxLink = (name) => { return `https://api.mapbox.com/geocoding/v5/mapbox.places/${name}.json?access_token=pk.eyJ1Ijoiam9obmF0aGFubml6aW9sIiwiYSI6ImNqcG5oZjR0cDAzMnEzeHBrZGUyYmF2aGcifQ.7vAuGZ0z6CY0kXYDkcaOBg&limit=10&bbox=-97.325875,49.766204,-96.953987,49.99275` }\ngetOrigin = () => {\n  let origin = document.getElementById(\"origin\").value;\n  getMapBoxLocations(origin, 'origin');\n}\ngetDestination = () => {\n  let destination = document.getElementById(\"destination\").value;\n  getMapBoxLocations(destination, 'destination');\n}\n\ngetMapBoxLocations = (name, _type) => {\n  fetch(mapBoxLink(name)).then(res => res.json()).then((data) => {\n    locations = data.features;\n    all_locations = [];\n    locations.forEach(location => {\n      location_data = `<li data-long=\"${location.center[0]}\" data-lat=\"${location.center[1]}\" \n          id=\"${location.id.split('.')[1]}\" class=\"${_type}\" onclick=\"setSelected(${location.id.split('.')[1]})\">\n          <div class=\"name ${_type}\">${location && location.place_name.split(',')[0]}</div>\n          <div class=\"${_type}\">${location && location.place_name.split(',')[1]}</div>\n        </li>`;\n      all_locations.push(location_data);\n    });\n    if (_type == \"origin\") {\n      document.getElementById(\"origins\").innerHTML = all_locations.join(\"\");\n    } else {\n      document.getElementById(\"destinations\").innerHTML = all_locations.join(\"\");\n    }\n  }).catch((error) => {\n  });\n}\n\nsetSelected = (id) => {\n  _typ = event.target.className;\n  var origins = document.getElementById(\"origins\");\n\n  for (var i = 0; i < origins.childNodes.length; i++) {\n    if (origins.childNodes[i].className == \"origin selected\" && _typ.includes(\"origin\")) {\n      selected = origins.childNodes[i];\n      selected.classList.remove(\"selected\")\n    }\n    if (origins.childNodes[i].className == \"origin\" && origins.childNodes[i].id == id && _typ.includes(\"origin\")) {\n      origins.childNodes[i].classList.add(\"selected\");\n    }\n  }\n\n  var destinations = document.getElementById(\"destinations\");\n  for (var j = 0; j < destinations.childNodes.length; j++) {\n    if (destinations.childNodes[j].className == \"destination selected\" && _typ.includes(\"destination\")) {\n      new_selected = destinations.childNodes[j];\n      new_selected.classList.remove(\"selected\")\n    }\n    if (destinations.childNodes[j].className == \"destination\" && destinations.childNodes[j].id == id && _typ.includes(\"destination\")) {\n      destinations.childNodes[j].classList.add(\"selected\");\n    }\n  }\n}\n\n\nplanTrip = () => {\n  selected_origin = document.getElementsByClassName(\"origin selected\");\n\n  selected_destination = document.getElementsByClassName(\"destination selected\");\n  if ((selected_origin && selected_destination) && (selected_origin != selected_destination)) {\n    fetch(`https://api.winnipegtransit.com/v3/trip-planner.json?origin=geo/${selected_origin[0].dataset.lat},${selected_origin[0].dataset.long}&api-key=ZPFv2Zx6ny1KrlPKnfe&destination=geo/${selected_destination[0].dataset.lat},${selected_destination[0].dataset.long}`)\n      .then(res => res.json())\n      .then(data => {\n        all_segs = []\n        data.plans[0].segments.forEach(seg => {\n          if (seg.type == \"walk\") {\n            if (seg.to.stop) {\n              all_segs.push(`<li>\n                              <i class=\"fas fa-walking\" aria-hidden=\"true\"></i>${seg.type} for ${seg.times.durations.total} minutes to stop #${seg.to.stop && seg.to.stop.key} - ${seg.to.stop && seg.to.stop.name}\n                            </li>`)\n            } else {\n              all_segs.push(`<li>\n                              <i class=\"fas fa-walking\" aria-hidden=\"true\"></i>${seg.type} for ${seg.times.durations.total} minutes to your destination\n                            </li>`)\n            }\n          }\n\n          if(seg.type == \"ride\"){\n            all_segs.push(`\n            <li>\n              <i class=\"fas fa-bus\" aria-hidden=\"true\"></i>${seg.type} the ${seg.route.name || seg.route.key} for ${seg.times.durations.total} minutes\n            </li>`)\n          }\n\n          if(seg.type == \"transfer\"){\n            all_segs.push(`<li>\n            <i class=\"fas fa-ticket-alt\" aria-hidden=\"true\"></i>${seg.type} from stop\n             #${seg.from.stop && seg.from.stop.key} - ${seg.from.stop && seg.from.stop.key} to stop #${seg.to.stop && seg.to.stop.key} - ${seg.to.stop && seg.to.stop.name}\n          </li>`)\n          }\n        })\n\n        document.getElementById(\"my-trip\").innerHTML = all_segs.join(\"\");\n      })\n  }\n}","\nconst gulp = require('gulp');\nconst cleanCSS = require('gulp-clean-css');\nconst babel = require('gulp-babel');\nconst sourcemaps = require('gulp-sourcemaps');\nconst concat = require('gulp-concat');\nvar uglify = require('gulp-uglify');\nconst terser = require('gulp-terser');\nvar all = require('gulp-all')\n\nfunction build() {\n    return all(\n        gulp.src('*.js')\n            .pipe(terser())\n            .pipe(gulp.dest('dist/js')),\n\n        gulp.src('*.js')\n            .pipe(sourcemaps.init())\n            .pipe(concat('output.js'))\n            .pipe(sourcemaps.write('.'))\n            .pipe(gulp.dest('dist/js'))\n        ,\n        gulp.src('*.css')\n            .pipe(cleanCSS({ compatibility: 'ie8' }))\n            .pipe(gulp.dest('dist/css'))\n    )\n};\n\ngulp.task('default', build);"]}